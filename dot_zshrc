# zmodload zsh/zprof
# Zinit
source ~/.zsh/zinit.zsh
source ~/.zsh/tmux.zsh
source ~/.zsh/alias.zsh
source ~/.zsh/path.zsh

# only source arch if the system is arch linux
if [[ -f ~/.zsh/arch.zsh && -d /etc/arch-release ]]; then
  source ~/.zsh/arch.zsh
fi

# History
HISTFILE=~/.zsh_history
HISTSIZE=5000
SAVEHIST=$HISTSIZE
HISTDUP=erase
setopt appendhistory
setopt sharehistory
setopt hist_ignore_dups
setopt hist_ignore_all_dups
setopt hist_save_no_dups
setopt hist_find_no_dups

# Completion styling
zstyle ':completion:*:git-checkout:*' sort false
zstyle ':completion:*:descriptions' format '[%d]'
zstyle ':completion:*' list-colors ${(s.:.)LS_COLORS}
zstyle ':completion:*' menu no
zstyle ':fzf-tab:complete:cd:*' fzf-preview 'eza -1 --color=always $realpath'
# zstyle ':fzf-tab:*' fzf-flags --color=fg:1,fg+:2 --bind=tab:accept
zstyle ':fzf-tab:*' use-fzf-default-opts yes
zstyle ':fzf-tab:*' switch-group '<' '>'

# bind zsh zsh-autosuggestions accept to same as my neovim copilot
bindkey '^f' autosuggest-accept

# carapace - shell completion tool
# export CARAPACE_BRIDGES='zsh,fish,bash,inshellisense' # optional
# zstyle ':completion:*' format $'\e[2;37mCompleting %d\e[m'
# source <(carapace _carapace)

# zprof
